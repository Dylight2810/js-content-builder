"use strict";const API_URL={ELEMENT_CONFIG:"http://dev.omipage.com/api/v1/landings/",COLLECTION_PRODUCTS:"http://dev.omipage.com/api/v1/products/simple/"},EnumLandingBlockElementName={NONE:"",LANDING_HEADER:"OMP_HEADER",LANDING_MENU_FOOTER:"OMP_MENU_FOOTER",LANDING_PRODUCT_DETAIL:"OMP_PRODUCT_DETAIL",LANDING_ALL_PRODUCTS:"OMP_ALL_PRODUCTS",DESIGN_CAROUSEL:"OMP_CAROUSEL",DESIGN_TWO_IMAGE:"OMP_TWO_IMAGE",DESIGN_VIDEO:"OMP_VIDEO",DESIGN_OUTSTANDING_PRODUCT:"OMP_OUTSTANDING_PRODUCT",DESIGN_BEST_SELLING_PRODUCT:"OMP_BEST_SELLING_PRODUCT",DESIGN_NEW_PRODUCT:"OMP_NEW_PRODUCT",DESIGN_RELATED_PRODUCT:"OMP_RELATED_PRODUCT",DESIGN_FLASH_SALE:"OMP_FLASH_SALE"},EnumPageType={HOME:"home",PRODUCT_DETAIL:"product_detail",POLICY:"policy_page"};!function(e){class n{landing_token;constructor(){this._getLandingToken()}_createGetRequest=e=>new Promise(((n,t)=>{const i=new XMLHttpRequest;i.onreadystatechange=()=>{if(4===i.readyState&&200===i.status)return n(i.responseText)},i.open("GET",e,!0),i.setRequestHeader("Authorization",this.landing_token),i.send()}));getPageElementsConfigAsync=async e=>{const n=`${API_URL.ELEMENT_CONFIG}${e}/elements/`;return await this._createGetRequest(n)};getCollectionDataAsync=async e=>{const n=`${API_URL.COLLECTION_PRODUCTS}?collection_id=${e}&is_parent=true`;return await this._createGetRequest(n)};_getLandingToken=()=>{const e=document.querySelectorAll('meta[name="omp-key"]')[0];this.landing_token=`Landing ${e.getAttribute("content")}`}}class t{constructor(){}_headerElementBuilder=(e,n)=>`<div  id="OMP_HEADER">\n                        <div  class="omp-header-block--content">\n                            <img  alt="Landing Logo" src="${n}">\n                            <div  class="omp-header--landing-name">${e}</div>\n                            <div  class="omp-header--space"></div>\n                        </div>\n                    </div>`;_footerElementBuilder=()=>'<div  id="OMP_MENU_FOOTER">\n                        <div  class="omp-header-block--content">\n                            <div  class="omp-menu-wrapper">\n                                <div  class="omp-menu-item ng-star-inserted">\n                                    <div  class="omp-menu-item--content active">\n                                        <p>\n                                            <i class="bi bi-house"></i>\n                                        </p>\n                                        <span>Trang chủ</span>\n                                    </div>\n                                </div>\n                                <div  class="omp-menu-item ng-star-inserted">\n                                    <div class="omp-menu-item--content">\n                                        <p>\n                                            <i class="bi bi-cart4"></i>\n                                        </p>\n                                        <span>Giỏ hàng</span>\n                                    </div>\n                                </div>\n                                <div  class="omp-menu-item ng-star-inserted">\n                                    <div  class="omp-menu-item--content">\n                                        <p>\n                                            <i class="bi bi-heart"></i>\n                                        </p>\n                                        <span>Yêu thích</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>';_outstandingProductContentBuilder=(e,n)=>{if(!n.length)return"";let t="";return n.forEach((e=>{t+=`<div class="omp-col-6 omp-product-wrapper">\n                                <div class="omp-product-card">\n                                    <div class="omp-product-card__top">\n                                    <span class="product-card--premium">Hot</span>\n                                    <img alt="" class="mb-2" src="${e.avatar_image}">\n                                    </div>\n                                    <div class="omp-product-card__bottom">\n                                        <div class="omp-product-card--category">${e.sku}</div>\n                                        <div class="omp-product-card--name">${e.name}</div>\n                                        <div class="product--rating-stars">\n                                            <i class="bi bi-star-fill"></i>\n                                            <i class="bi bi-star-fill"></i>\n                                            <i class="bi bi-star-fill"></i>\n                                            <i class="bi bi-star-fill"></i>\n                                            <i class="bi bi-star-fill"></i>\n                                        </div>\n                                        <div class="omp-product-card--price">\n                                            <span class="mr-1">${e.listed_price} ${e.currency}</span>\n                                            <small>\n                                                <del>${e.price} ${e.currency}</del>\n                                            </small>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>`})),`<div class="omp-landing-block--title">${e}</div>\n                    <div class="omp-landing-block--content">\n                        <div class="omp-wp__outstanding-product">\n                            <div class="omp-row">${t}</div>\n                        </div>\n                    </div>`}}e.LandingElementConfig=class{data_service=new n;content_builder=new t;constructor(){}initialMainPage=()=>{this._getElementConfigs().then()};_getElementConfigs=async()=>{const e=await this.data_service.getPageElementsConfigAsync(35),n=JSON.parse(e);console.log(e),this._handleGetPageElementConfig(n)};_handleGetPageElementConfig=e=>{if(!e||!e.elements||!e.elements.length)return;const n=e.elements.find((e=>e.page_id===EnumPageType.HOME));console.log(n),n&&n.page_elements&&this._renderElement(n.page_elements)};_renderElement=e=>{const n=e.dynamic_elements;e.statics_elements.forEach((e=>{switch(e.element_id){case EnumLandingBlockElementName.LANDING_HEADER:document.getElementById(e.element_id).innerHTML=this.content_builder._headerElementBuilder("My Shop","https://storage.googleapis.com/omisell-cloud/omipage/logoulashop.png");break;case EnumLandingBlockElementName.LANDING_MENU_FOOTER:document.getElementById(e.element_id).innerHTML=this.content_builder._footerElementBuilder()}})),n.forEach((e=>{this._renderProductElement(e).then()}))};_renderProductElement=async e=>{const n=document.getElementById(e.element_id);if(e.config&&e.config.collection){const t=await this.data_service.getCollectionDataAsync(e.config.collection.id),i=JSON.parse(t).results;n.innerHTML=this.content_builder._outstandingProductContentBuilder(e.element_title,i)}}}}(window);const landing_element_config=new LandingElementConfig;landing_element_config.initialMainPage();
